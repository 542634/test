require(["config"],function(){require(["jquery","header","footer","template"],function(a,i,o,t){a("header").load("/html/component/header.html",function(){i.init()}),a("footer").load("/html/component/footer.html",function(){o.init()});a("#big-box"),a(".img-big"),a("#smallbox"),a("#big-box img");var l=location.search.slice(1).split("="),e={};e[l[0]]=l[1],a.ajax({type:"POST",data:e,url:"http://localhost/project-gtx/api/V1/product.php",dataType:"json",success:function(l){var i=t("html-script",{products:l.project});a(".product-box").html(i),a(".img-big").mousemove(function(i){var o=(i=i||event).pageX-a("#smallbox").width()/2-a(".img-big").offset().left;_top=i.pageY-a("#smallbox").height()/2-a(".img-big").offset().top,o<0&&(o=0),_top<0&&(_top=0),o>a(".img-big").width()-a("#smallbox").width()&&(o=a(".img-big").width()-a("#smallbox").width()),_top>a(".img-big").height()-a("#smallbox").height()&&(_top=a(".img-big").height()-a("#smallbox").height()),a("#smallbox").css({display:"block",left:o,top:_top}),a("#big-box").css({display:"block"}),a("#big-box img").css({left:-2.9126*o,top:-2.9126*_top})}),a(".img-big").mouseleave(function(){a("#big-box").css({display:"none"}),a("#smallbox").css({display:"none"})}),a(".img-small li").hover(function(){a(this).addClass("b-red").siblings().removeClass("b-red")}),a(".img-small li img").hover(function(){a(".img-big img").attr("src",a(this).attr("src")),a("#big-box img").attr("src",a(this).attr("src"))}),a(".size li").click(function(){a(this).toggleClass("ac").siblings().removeClass("ac")}),a(".down").click(function(){var i=a("#num").val();--i<1&&(i=1),a("#num").val(i)}),a(".up").click(function(){var i=a("#num").val();10<=++i&&(i=10),a("#num").val(i)});var e=[],o=a.cookie("cart");console.log(o),o&&(e=JSON.parse(o)),console.log(e),a(".addcart").click(function(){for(var i=0;i<e.length;i++)if(e[i].id==l.project[0].id){e[i].num++;break}if(i===e.length){var o={id:l.project[0].id,name:l.project[0].name,price:l.project[0].price,color:l.project[0].color,img:l.project[0].img1,num:a("#num").val(),size:a(".size .ac").html()};e.push(o)}var t=JSON.stringify(e);confirm("添加购物车成功,是否前往购物车?")&&(location.href="http://localhost:4444/html/shoppingcar.html"),a.cookie("cart",t,{path:"/",expires:7})})}})})});