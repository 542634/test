require(["config"],function(){require(["jquery","header","footer","template"],function(n,t,e,i){n("header").load("/html/component/header.html",function(){t.init()}),n("footer").load("/html/component/footer.html",function(){e.init()});var r=n.cookie("cart");if(null==r)n(".cart-empty").css({display:"block"}),n(".steps").css({display:"none"}),n(".cart-container").css({display:"none"}),n(".youlike").css({display:"block"});else{var c=JSON.parse(r),h=i("html-script",{products:c});n("#html-template").html(h)}var a=n(".checked").length,o=0;n(".allchecked").click(function(){n(".allchecked").prop("checked")?(o=2,n(".checked").prop("checked",!0)):(o=0,n(".checked").prop("checked",!1))}),n(".checked").click(function(){n(this).prop("checked")?o++:o--,o==a&&n(".allchecked").prop("checked",!0),o<a&&n(".allchecked").prop("checked",!1)}),n(".down").click(function(){var t=n(this).next().val();--t<1&&(alert("该宝贝不能再少了哟 ！亲"),t=1),n(this).next().val(t);for(var e=0;e<c.length;e++)if(n(this).parent().parent().attr("data-id")==c[e].id){c[e].num=t,n(this).parent().parent().find("#allprice em").html(c[e].num*c[e].price+".00");var i=0;for(e=0;e<c.length;e++)i+=c[e].price*c[e].num;n("#products-price").html("￥"+i+".00"),n("#allProduct-price").html("￥"+i+".00")}var r=JSON.stringify(c);n.cookie("cart",r,{path:"/",expires:7})}),n(".up").click(function(){var t=n(this).prev().val();t++,n(this).prev().val(t);for(var e=0;e<c.length;e++){if(n(this).parent().parent().attr("data-id")==c[e].id){c[e].num=t,n(this).parent().parent().find("#allprice em").html(c[e].num*c[e].price+".00");var i=0;for(e=0;e<c.length;e++)i+=c[e].price*c[e].num;n("#products-price").html("￥"+i+".00"),n("#allProduct-price").html("￥"+i+".00")}}var r=JSON.stringify(c);n.cookie("cart",r,{path:"/",expires:7})});for(var l=0,p=0;p<c.length;p++)l+=c[p].price*c[p].num;n("#products-price").html("￥"+l+".00"),n("#allProduct-price").html("￥"+l+".00"),n(".remove").click(function(){confirm("你确定要移除该商品吗？亲")&&n(this).parent().parent().remove();for(var t=0;t<c.length;t++){n(this).parent().parent().attr("data-id")==c[t].id&&c.splice(t,1)}var e=0;for(t=0;t<c.length;t++)e+=c[t].price*c[t].num;n("#products-price").html("￥"+e+".00"),n("#allProduct-price").html("￥"+e+".00");var i=JSON.stringify(c);n.cookie("cart",i,{path:"/",expires:7})}),n(".edit").click(function(){n(this).parent().find(this).hide(),n(this).parent().find(".size").hide(),n(this).parent().find(".color").hide(),n(this).parent().find(".isize").show().val(n(".size").html()),n(this).parent().find(".icolor").show().val(n(".color").html()),n(this).parent().find(".okBtn").show(),n(this).parent().find(".cancel").show()}),n(".okBtn").click(function(){n(this).parent().find(this).hide(),n(this).parent().find(".isize").hide(),n(this).parent().find(".icolor").hide(),n(this).parent().find(".size").show().html(n(".isize").val()),n(this).parent().find(".color").show().html(n(".icolor").val()),n(this).parent().find(".edit").show(),n(this).parent().find(".cancel").hide()}),n(".cancel").click(function(){n(this).hide(),n(this).parent().find(".isize").hide(),n(this).parent().find(".icolor").hide(),n(this).parent().find(".size").show(),n(this).parent().find(".color").show(),n(this).parent().find(".edit").show(),n(this).parent().find(".okBtn").hide()})})});